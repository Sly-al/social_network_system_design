# social_network_system_design

## Функциональные требования

- Публикация постов
- Комментирование постов
- Реакции на посты других пользователей
- Подписки на других пользователей
- Поиск популярных мест для путешествий
- Просмотр ленты постов своих подписчиков
- Просмотр ленты другого пользователя

## Нефункциональные требования

- DAU 10.000.000
- Доступность 99.95%
- Данные храним всегда
- Сезонность есть: период отпусков и праздники, множитель на создание постов в 2 раза на этот период
- Аудитория: страны СНГ
- Активность пользователей:
    - пользователь в среднем делает 1 пост в две недели о своей поездке
    - пользователь в среднем комментирует по 2 поста в день
    - пользователь в среднем оценивает по 5 постов в день
    - пользователь делает по одной подписке в день
    - пользователь в среднем выполняет по 3 поиска в день
    - пользователь смотрит по 10 постов(вместе с 5 комментариями) других путешественников в день
- Лимиты
    - Один пост состоит из заголовка(до 100 символов), описания(до 1000 символов) и 5 фотографий(вес каждой до 1 мб)
    - Один комментарий до 500 символов
    - Ограничение на подписки - 1000
- Тайминги
    - публикация поста 1-2с
    - комментарий к посту 1c
    - загрузка ленты до 5с
    - реакция на посты 800мс
- RPS
    - Подсистема постов
        - Read(просмотр постов): (10.000.000 * 10) / 86400 = 1157
        - Write(публикация постов): 10.000.000 / (86400 * 14) = 8
    - Подсистема комментариев и реакций
        - Write(комментирование чужих постов): (10.000.000 * 2) / 86400 = 231
        - Write(реакции на чужие посты): (10.000.000 * 5) / 86400 = 579
    - Поиск
        - Read(новые локации): (10.000.000 * 3) / 86400 = 347
- Трафик
- Один символ текста будет занимать 2Б
    - Подсистема постов:
      - Медиа
          - Создание поста: 8 * 5Мб(фото) = 40МБ/с
          - Чтение поста: 1157 * 5Мб(тоже фото) = 5,8Гб/с
      - Метаинформация:
          - Создание поста: 8 * (100 * 2Б + 1000*2Б + 50Б(метаданные)) = 18Кб/с
          - Чтение поста: 1157 * (100 * 2Б + 1000*2Б + 50Б(метаданные)) = 2,6Мб/с
    - Подсистема комментариев и реакций:
      - Комментирование чужих постов: 231 * (500 * 2Б) = 231Кб/с
      - Реакции на чужие посты: 579 * 8Б = 4,6Кб/с
    - Подсистема поиска:
        - Просмотр рекомендации: 347 * (200 * 2Б + 50Б) = 156Мб/с

## Оценка использования дисков

- Подсистема медиа
    - Capacity: 5.8ГБ/с * 86400 * 365 = 182908ТБ(HDD: 5716; SSD-sata: 183; SSD-nVME: 6097)
    - IOPS: 1160(HDD: 12; SSD-sata: 2; SSD-nVME: 1)
    - Throughput: 5,8Гб/с (HDD: 58; SSD-sata: 12; SSD-nVME: 2)
    - Total: HDD - 5716; SSD-sata - 183; SSD-nVME - 6097
- Подсистема постов
    - Capacity: 2,6Мб/с * 86400 * 365 = 82Тб(HDD: 3; SSD-sata: 1; SSD-nVME: 3)
    - IOPS: 1160(HDD: 12; SSD-sata: 2; SSD-nVME: 1)
    - Throughput: 2,6Мб/с (HDD: 1; SSD-sata: 1; SSD-nVME: 1)
    - Total: HDD - 12; SSD-sata - 2; SSD-nVME - 3
- Подсистема комментариев и реакций:
    - Capacity: 240Кб/с * 86400 * 365 = 8Тб(HDD: 1; SSD-sata: 1; SSD-nVME: 1)
    - IOPS: 810 (HDD: 9; SSD-sata: 1; SSD-nVME: 1)
    - Throughput: 240Кб/с (HDD: 1; SSD-sata: 1; SSD-nVME: 1)
    - Total: HDD - 9; SSD-sata - 1; SSD-nVME - 1